<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Learn | The School Of Athens</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="../styles/style.css">

    <style>
        .compose-area {
            justify-content: center;
            align-items: center;
        }

        label {
            margin-left: 5px;
            font-size: 1.5rem;
        }

        .form-control {
            font-size: 1.1rem;
        }

        .preview {}

        .preview-paragraph {

        }

        .preview-subtitle {

        }


        .preview-quote {
            padding-top: 3rem;
            padding-bottom: 3rem;
            border: solid;
            border-radius: 1rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
            text-align: center;
            
        }

        .preview-quote p {
            font-family: 'Merriweather', serif;
            font-size: 2rem;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg navb navbar-min-height" style="padding: 0;">
        <div class="container-fluid" style="padding: 0 3rem;">
            <a class="navbar-brand" href="/" style="padding: 0; margin-right: 0;">
                <img src="https://schoolofathens.world/images/classical-building.png"
                    style="width: 30px; height: 30px; margin-right: 0.75rem;">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar2"
                aria-controls="offcanvasNavbar2">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="offcanvas offcanvas-end text-bg-light" tabindex="-1" id="offcanvasNavbar2"
                aria-labelledby="offcanvasNavbar2Label">

                <div class="offcanvas-body">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a id="site-name" class="nav-link text-secondary px-2" aria-current="page" href="/">The
                                School of
                                Athens</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active text-secondary navlink px-4" aria-current="page"
                                href="/forum">Forum</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active text-secondary navlink px-4" aria-current="page"
                                href="/learn">Learn</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active text-secondary navlink px-4" aria-current="page"
                                href="/groups">Groups</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active text-secondary navlink px-4" aria-current="page"
                                href="/about">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active text-secondary navlink px-4" aria-current="page" href="/todo">To
                                Do</a>
                        </li>
                    </ul>

                    <div class="login-signup"
                        style="text-align: center; display: flex; align-items: center; justify-content: center;">
                        <button type="button" class="btn btn-outline-secondary me-2"
                            onclick="window.location.href='/login';">Login</button>
                        <button type="button" class="btn btn-primary"
                            onclick="window.location.href='/join';">Sign-up</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <section class="py-5 text-center container">
        <div class="row py-lg-5">
            <h1 class="fw-light">Compose Your Article Here</h1>
            <p class="lead text-muted">Today is <%= today %>
            </p>
        </div>
    </section>

    <section class="container preview">

    </section>


    <section class="container compose-area">
        <form method="post" action="compose">

            <div class="hidden-inputs">

            </div>

            <div class="mb-3">
                <label for="" class="form-label">Title</label>
                <input type="text" class="form-control" name="title" placeholder="Title"></input>
            </div>

            <div class="mb-3">
                <label for="" class="form-label">Type</label>
                <select name="image" class="form-select" id="input-type">
                    <option value="subtitle">Subtitle</option>
                    <option value="paragraph" selected>Paragraph</option>
                    <option value="image">Image</option>
                    <option value="quote">Quote</option>
                </select>
            </div>

            <h3>
                Can there be a text inside a form?
            </h3>

            <div class="mb-3" id="input-section">
                <textarea id="input-box" type="text" class="form-control" name="content"
                    placeholder="Share your insights. The preview page will only show 120 characters."
                    rows="10"></textarea>
            </div>

            <div class="mb-3 text-center">
                <button type="submit" class="btn btn-primary" id="save">Save Changes</button>
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>


        </form>
    </section>



    <div class="container footer mt-4" style="scroll-snap-align: end;">
        <footer class="flex-wrap py-3" style="border-top: medium solid #E2E8F0">
            <div class="row">
                <div class="col-lg-4 col-md-2 col-sm-12 text-center text-md-start" style="margin-bottom: 0.5rem;">
                    <a href="/">
                        <img src="https://schoolofathens.world/images/classical-building.png"
                            style="width: 30px; height: 30px;">
                    </a>
                </div>

                <div class="col-lg-4 col-md-5 col-sm-12 text-center" style="margin-bottom: 0.5rem;">
                    <p class="mb-0 text-muted">Created by Jinzhou Wu</p>
                </div>

                <div class="col-lg-4 col-md-5 col-sm-12" style="margin-bottom: 0.5rem; line-height: 2;">
                    <ul class="nav justify-content-center justify-content-md-end">
                        <li class="nav-item"><a href="/" class="nav-link px-2 text-muted">Home</a></li>
                        <li class="nav-item"><a href="/contact" class="nav-link px-2 text-muted">Contact</a></li>
                        <li class="nav-item"><a href="/faq" class="nav-link px-2 text-muted">FAQs</a></li>
                        <li class="nav-item"><a href="/about" class="nav-link px-2 text-muted">About</a></li>
                    </ul>
                </div>
            </div>
        </footer>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

    <script>
        let saveBtn = document.querySelector("#save");
        let hiddenInput = document.querySelector(".hidden-inputs");
        let preview = document.querySelector(".preview");
        let inputSec = document.querySelector("#input-section");
        let inputType = document.querySelector("#input-type");

        let textArea = document.querySelector("textarea");

        let textBox = document.createElement("input");
        textBox.setAttribute("type", "text");
        textBox.setAttribute("class", "form-control");
        textBox.setAttribute("placeholder", "New Subtitle");
        textBox.setAttribute("id", "input-box");

        let fileUpload = document.createElement("input");
        fileUpload.setAttribute("type", "file");
        fileUpload.setAttribute("class", "form-control btn btn-outline-secondary");
        fileUpload.setAttribute("id", "input-box");

        inputType.addEventListener("change", (e) => {
            if (inputType.value === "subtitle") {
                inputSec.removeChild(document.querySelector("#input-box"));
                inputSec.appendChild(textBox);
            }
            else if (inputType.value === "paragraph") {
                inputSec.removeChild(document.querySelector("#input-box"));
                inputSec.appendChild(textArea);
            }
            else if (inputType.value === "image") {
                inputSec.removeChild(document.querySelector("#input-box"));
                inputSec.appendChild(fileUpload);
            }
            else if (inputType.value === "quote") {
                inputSec.removeChild(document.querySelector("#input-box"));
                inputSec.appendChild(textBox);
            }
        });

        saveBtn.addEventListener("click", (e) => {
            e.preventDefault();

            let inputBox = document.querySelector("#input-box");
            let newSec = document.createElement("div");

            if (inputType.value === "paragraph") {
                let p = document.createElement("p");
                p.textContent = inputBox.value;
                newSec.append(p);
                newSec.classList.add("preview-paragraph");
                preview.append(newSec);
            }
            else if (inputType.value === "subtitle") {

                let h = document.createElement("h2");
                h.textContent = inputBox.value;
                newSec.append(h);
                newSec.classList.add("preview-subtitle");
                preview.append(newSec);
            }
            else if (inputType.value === "image") {
                alert("not supported");
            }
            else if (inputType.value === "quote") {
                let q = document.createElement("p");
                q.textContent = inputBox.value;
                newSec.append(q);
                newSec.classList.add("preview-quote");
                preview.append(newSec);
            }

            let newHidden = document.createElement("input");
            newHidden.setAttribute("type", "hidden");
            newHidden.setAttribute("name", inputType.value);
            newHidden.textContent = inputBox.value;
            hiddenInput.appendChild(newHidden);

            inputBox.value = "";
        });


    </script>
</body>

</html>